{%include 'base.html'%}
{% load static %}
{% load cloudinary %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/universal.css' %}">  
{% endblock  %}
  

{% block content %} 

{% include "./navigations/mainnav.html" %}

<div id="carouselExampleCaptions" class="carousel carousel-fade slide" data-mdb-ride="carousel">
  <div class="carousel-indicators">
    <button
      type="button"
      data-mdb-target="#carouselExampleCaptions"
      data-mdb-slide-to="0"
      class="active"
      aria-current="true"
      aria-label="Slide 1"
    ></button>
    <button
      type="button"
      data-mdb-target="#carouselExampleCaptions"
      data-mdb-slide-to="1"
      aria-label="Slide 2"
    ></button>
    <button
      type="button"
      data-mdb-target="#carouselExampleCaptions"
      data-mdb-slide-to="2"
      aria-label="Slide 3"
    ></button>
    <button
      type="button"
      data-mdb-target="#carouselExampleCaptions"
      data-mdb-slide-to="3"
      aria-label="Slide 4"
    ></button>
  </div>
  <div class="carousel-inner">

    <div class="carousel-item active">
      <img
        src="https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/mothers-day-flower-bouquet-1588610191.jpg"
        class="d-block w-100 img-car"
        alt="..."
      />
      
      <div class="carousel-caption d-none d-md-block">
        <h1 class="mt-5 main-car-txt">Search for <br />
          building products <br />
          and finishes across Kenya <br />
          </h1>
          <p class="mt-3 p-car">Browse more than 5,000 materials with new ones listed <br />
          on a daily basis near you.</p>

          <a class="mt-4" href="{% url 'browse' %}">
          <button class="carousel-btn mt-5" type="button"><span class="carousel-btn-txt">Browse Products</span></button>
      </div>      
    </div>

    <div class="carousel-item">
      <img
        src="https://images.ctfassets.net/i3tkg7dt3kro/5W5N3vWz9q2iqWjoNdtxG2/8f760ba236135a672566e9a8d0b139d4/shutterstock_529504228-scaled.jpg"
        class="d-block w-100 img-car"
        alt="buildsoko-cactus"
      />
      
      <div class="carousel-caption d-none d-md-block">
        <h1 class="mt-5 main-car-txt">Search for <br />
          building products <br />
          and finishes across Kenya <br />
          </h1>
          <p class="mt-3 p-car">Browse more than 5,000 materials with new ones listed <br />
          on a daily basis near you.</p>

          <a class="mt-4" href="{% url 'browse' %}">
          <button class="carousel-btn mt-5" type="button"><span class="carousel-btn-txt">Browse Products</span></button>
      </div>      
    </div>

    <div class="carousel-item">
      <img
        src="https://www.brides.com/thmb/0e7-nzbVnar2vGR0ONm8xnFIXIw=/2453x1840/smart/filters:no_upscale()/140_Kurt_Boomer_Photography_www.kurtboomer.com-e9bf630249964a908ceb02f89c3a06de.jpg"
        class="d-block w-100 img-car"
        alt="buildsoko"
      />
      
      <div class="carousel-caption d-none d-md-block">
        <h1 class="mt-5 main-car-txt">Search for <br />
          building products <br />
          and finishes across Kenya <br />
          </h1>
          <p class="mt-3 p-car">Browse more than 5,000 materials with new ones listed <br />
          on a daily basis near you.</p>

          <a class="mt-4" href="{% url 'browse' %}">
          <button class="carousel-btn mt-5" type="button"><span class="carousel-btn-txt">Browse Products</span></button>
      </div>      
    </div>

    <div class="carousel-item">
      <img
        src="https://imagesvc.meredithcorp.io/v3/jumpstartpure/image?url=https://cf-images.us-east-1.prod.boltdns.net/v1/static/5985631785001/40a1f068-ade1-494c-99f4-45523fc8eae9/d3d31307-9939-4349-8424-c536360b9271/1280x720/match/image.jpg&w=1280&h=720&q=90&c=cc"
        class="d-block w-100 img-car"
        alt="buildsoko-home"
      />
      
      <div class="carousel-caption d-none d-md-block">
        <h1 class="mt-5 main-car-txt">Search for <br />
          building products <br />
          and finishes across Kenya <br />
          </h1>
          <p class="mt-3 p-car">Browse more than 5,000 materials with new ones listed <br />
          on a daily basis near you.</p>

          <a class="mt-4" href="{% url 'browse' %}">
          <button class="carousel-btn mt-5" type="button"><span class="carousel-btn-txt">Browse Products</span></button>
      </div>      
    </div>

  </div>
  <button
    class="carousel-control-prev"
    type="button"
    data-mdb-target="#carouselExampleCaptions"
    data-mdb-slide="prev"
  >
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Previous</span>
  </button>
  <button
    class="carousel-control-next"
    type="button"
    data-mdb-target="#carouselExampleCaptions"
    data-mdb-slide="next"
  >
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="visually-hidden">Next</span>
  </button>
</div>


<div class="container mt-5">
  <h3 class="shop top-view mb-5"><span class="line">Shop</span> By Category</h3>  
  
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-4 g-4">

        {% if category %}
     
        {% if category.0 %}
      <a href="{% url 'category_filter' category.0 %}">
      <div class="col">
          <div class="card category-card h-100">
          <div class="card-body">
              <h5 class="card-title"><div class="rounded-circles">
              <img class="img-fluid" src="../static/img/fence.png" alt="external" />
              </div></h5>
              <p class="card-text lead mt-4">
              {{ category.0.category }} <br /></p>

              <p class="text-ad">
                {% if external < 2 %}
                {{external}} ad posted               
                {% else %}
                {{external}} ads posted
                {% endif %}
              </p>

          </div>
          </div>
        </div>
        </a>  
        {% endif %}
      
        {% if category.1 %}
        <a href="{% url 'category_filter' category.1 %}">
      <div class="col">
      <div class="card category-card h-100">
      <div class="card-body">
          <h5 class="card-title"><div class="rounded-circles">
          <img class="img-fluid" src='../static/img/closet.png' alt="external" />
          </div></h5>
          <p class="card-text lead mt-4">
            {{ category.1 }} <br /></p>
          
              <p class="text-ad">
                {% if fitting < 2 %}
                {{fitting}} ad posted               
                {% else %}
                {{fitting}} ads posted
                {% endif %}
              </p>
                          
      </div>
      </div>
      </div>
      </a>
      {% endif %}

      {% if category.2 %}
      <a href="{% url 'category_filter' category.2 %}">
      <div class="col">
      <div class="card category-card cat-two h-100">
      <div class="card-body">
          <h5 class="card-title"><div class="rounded-circles">
          <img class="img-fluid" src='../static/img/asterisk.png' alt="external" />
          </div></h5>
          <p class="card-text lead mt-4">
            {{ category.2 }} <br /></p>

          <p class="text-ad">
                {% if general < 2 %}
                {{general}} ad posted               
                {% else %}
                {{general}} ads posted
                {% endif %}
              </p>

      </div>
      </div>
      </div>
      </a>
      {% endif %}

      {% if category.3 %}
      <a href="{% url 'category_filter' category.3 %}">
        <div class="col">
        <div class="card category-card int-lg cat-two h-100">
        <div class="card-body">
            <h5 class="card-title"><div class="rounded-circles">
            <img class="img-fluid" src='../static/img/3d.png' alt="external" />
            </div></h5>
            <p class="card-text lead mt-4">
              {{ category.3 }} <br /></p>
            
              <p class="text-ad">
                {% if internal < 2 %}
                {{internal}} ad posted               
                {% else %}
                {{internal}} ads posted
                {% endif %}
              </p>

        </div>
        </div>
        </div>
        </a>
      {% endif %}
      
      {% if category.4 %}
      <a href="{% url 'category_filter' category.4 %}">
      <div class="col">
      <div class="card category-card cat-top cat-two h-100">
      <div class="card-body">
          <h5 class="card-title"><div class="rounded-circles">
          <img class="img-fluid" src='../static/img/dog-house.png' alt="external" />
          </div></h5>
          <p class="card-text lead mt-4">
            {{ category.4 }} <br /></p>
          
            <p class="text-ad">
              {% if structure < 2 %}
              {{structure}} ad posted               
              {% else %}
              {{structure}} ads posted
              {% endif %}
            </p>

      </div>
      </div>
      </div>
      </a>
      {% endif %}

      {% if category.5 %}
      <a href="{% url 'category_filter' category.5 %}">
      <div class="col">
      <div class="card category-card cat-top cat-two h-100">
      <div class="card-body">
          <h5 class="card-title"><div class="rounded-circles">
          <img class="img-fluid" src='../static/img/palace.png' alt="external" />
          </div></h5>
          <p class="card-text lead mt-4">
            {{ category.5 }} <br /></p>
          
            <p class="text-ad">
              {% if superstructure < 2 %}
              {{superstructure}} ad posted               
              {% else %}
              {{superstructure}} ads posted
              {% endif %}
            </p>

      </div>
      </div>
      </div>
      </a>
      {% endif %}

      {% if category.6 %}
      <a href="{% url 'category_filter' category.6 %}">
      <div class="col">
      <div class="card category-card cat-top cat-two h-100">
      <div class="card-body">
          <h5 class="card-title"><div class="rounded-circles">
          <img class="img-fluid" src='../static/img/water-tap.png' alt="external" />
          </div></h5>
          <p class="card-text lead mt-4">
            {{ category.6 }} <br /></p>
          
            <p class="text-ad">
              {% if taps < 2 %}
              {{taps}} ad posted               
              {% else %}
              {{taps}} ads posted
              {% endif %}
            </p>

      </div>
      </div>
      </div>
    </a>
    {% endif %}

    {% if category.7 %}
    <a href="{% url 'category_filter' category.7 %}">
      <div class="col">
      <div class="card category-card cat-top cat-two h-100">
      <div class="card-body">
          <h5 class="card-title"><div class="rounded-circles">
          <img class="img-fluid" src='../static/img/hammer.png' alt="external" />
          </div></h5>
          <p class="card-text lead mt-4">
            {{ category.7 }} <br /></p>
          
            <p class="text-ad">
              {% if tools < 2 %}
              {{tools}} ad posted               
              {% else %}
              {{tools}} ads posted
              {% endif %}
            </p>
          
      </div>
      </div>
      </div>
      </a>
      {% endif %}
      {% endif %}

      </div>

  </div>

  <br />
  <br />


  <center>
    <div class="popup2">
      <span class="popuptext2 added2" id="added">Added to wishlist!</span>
      <span class="popuptext2 removed2" id="removed">Removed from wishlist!</span>
    </div>
  </center>


<div class="card">
        <div class="container mt-5">  
         
            <ul class="nav nav-pills nav-justified mt-4 mb-3" id="ex1" role="tablist">
              {% if popular %}
            <li class="nav-item main-tab" role="presentation">
                <a
                class="to-right actived tabs"
                id="ex3-tab-1"
                data-mdb-toggle="pill"
                href="#ex3-pills-1"
                role="tab"
                aria-controls="ex3-pills-1"
                aria-selected="true"
                >Popular products</a>
            </li>

            {% endif %}

            {% if latest %}
            <li class="nav-item main-tab" role="presentation">
                <a
                class="tabs to-left"
                id="ex3-tab-2"
                data-mdb-toggle="pill"
                href="#ex3-pills-2"
                role="tab"
                aria-controls="ex3-pills-2"
                aria-selected="false"
                >Latest products</a>
            </li>
            {% endif %}

            </ul>

            <div class="tab-content" id="ex2-content">

            <div
                class="tab-pane fade show active"
                id="ex3-pills-1"
                role="tabpanel"
                aria-labelledby="ex3-tab-1"
            >

            <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4 mt-2 mb-2">

            {% for item in popular %}
           
                <div class="col">

                <a href="{% url 'singleproduct' item.uuid %}">
                    <div class="card h-100 product-card">
                    <img
                        src="{{ item.images.url }}"
                        class="card-img-top product-img"
                        alt="{{item.title}}"
                    />

                    {% if item.negotiatable == True %}
                    <div class="card-img-overlay">
                      <h5 class="card-title nego p-0">Negotiable</h5>
                    </div>
                    {% endif %}
                    
                    <div class="card-body card-cont">
                    <div class="location">
                    <h6 class="prod-cat">{{item.sub_category}}</h6>
                    <h6 class="prod-location"><span class="prod-location prod-icon-location"><i class="fas fa-map-marker-alt"></i></span> {{item.location}}</h6>
                    </div>
                        <h5 class="card-title mt-3 overflow">{{item.title}}</h5>
                        <div class="card-foot mt-3">
                        <p class="card-text price">Ksh. {{item.price}}</p>

                        <div class="card-foot-icon">

                          <a type="button" title="Share" class="open-button"> <i class="fas fa-share-alt"></i></a>
                          <a class="compare fone" title="Compare" data-compare="{{item.uuid}}"><i class="fas fa-exchange-alt ic"></i></a>
                        {% if user.is_authenticated %}
                        <div class="popup">
                          <a class="add" title="Save this product" data-product="{{item.uuid}}"><i class="far fa-heart ic"></i></a>
                        <span class="popuptext added" id="added">Added to wishlist!</span>
                        <span class="popuptext removed" id="removed">Removed from wishlist</span>
                        </div>
                        {% else %}
                        <i title="Login to save" class="far fa-heart ic disabled"></i>
                        {% endif %}
                        <a class="fone" title="Call seller" href="tel:{{ item.user.seller.phone_number }}"><i class="fas fa-phone-alt ic lc fone"></i></a>

                        </div>
                        
                        </div>
                    </div>
                    </div>
                    </a>
                </div>
                {% endfor %}


                </div>
            </div>

            <div
                class="tab-pane fade"
                id="ex3-pills-2"
                role="tabpanel"
                aria-labelledby="ex3-tab-2"
            >
                
            <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">

              {% for item in latest %}
              
           
              <div class="col">

              <a class="c" href="{% url 'singleproduct' item.uuid %}">
                  <div class="card h-100 product-card">
                  <img
                      src="{{ item.images.url }}"
                      class="card-img-top product-img"
                      alt="{{item.title}}"
                  />
                  {% if item.negotiatable == True %}
                    <div class="card-img-overlay">
                      <h5 class="card-title nego p-0">Negotiable</h5>
                    </div>
                    {% endif %}
                  <div class="card-body card-cont">
                  <div class="location">
                  <h6 class="prod-cat">{{item.sub_category}}</h6>
                  <h6 class="prod-location"><span class="prod-location prod-icon-location"><i class="fas fa-map-marker-alt"></i></span> {{item.location}}</h6>
                  </div>
                      <h5 class="card-title mt-3 overflow">{{item.title}}</h5>
                      <div class="card-foot mt-3">
                      <p class="card-text price">Ksh. {{item.price}}</p>

                      <div class="card-foot-icon">

                        <a type="button" title="Share" class="open-button"> <i class="fas fa-share-alt"></i></a>
                          <a class="compare fone" title="Compare" data-compare="{{item.uuid}}"><i class="fas fa-exchange-alt ic"></i></a>
                        {% if user.is_authenticated %}
                        <div class="popup">
                          <a class="add" title="Save this product" data-product="{{item.uuid}}"><i class="far fa-heart ic"></i></a>
                        <span class="popuptext added" id="added">Added to wishlist!</span>
                        <span class="popuptext removed" id="removed">Removed from wishlist</span>
                        </div>
                        {% else %}
                        <i title="Login to save" class="far fa-heart ic disabled"></i>
                        {% endif %}
                        <a class="fone" title="Call seller" href="tel:{{ item.user.seller.phone_number }}"><i class="fas fa-phone-alt ic lc fone"></i></a>

                      </div>
                      
                      </div>
                  </div>
                  </div>
                  </a>
              </div>
              {% endfor %}

            </div>
        </div>
        </div>
        </div>





        <div class="container mt-5 mb-5">

        <br />
        <h2 class="featured-heading mb-5">Featured Products</h2>
        <div class="row row-cols-1 row-cols-sm-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-4 g-4">

          {% if products %}
        {% for item in products|slice:":8" %} 
           
              <div class="col">          
              <a href="{% url 'singleproduct' item.uuid %}">
                  <div class="card h-100 product-card">
                  <img
                      src="{{ item.images.url }}"
                      class="card-img-top product-img"
                      alt="{{item.title}}"
                  />
                  {% if item.negotiatable == True %}
                    <div class="card-img-overlay">
                      <h5 class="card-title nego p-0">Negotiable</h5>
                    </div>
                    {% endif %}
                  <div class="card-body card-cont">
                  <div class="location">
                  <h6 class="prod-cat">{{item.sub_category}}</h6>
                  <h6 class="prod-location"><span class="prod-location prod-icon-location"><i class="fas fa-map-marker-alt"></i></span> {{item.location}}</h6>
                  </div>
                      <h5 class="card-title mt-3 overflow">{{item.title}}</h5>
                      <div class="card-foot mt-3">
                      <p class="card-text price">Ksh. {{item.price}}</p>

                      <div class="card-foot-icon">
                        
                        <a type="button" title="Share" class="open-button"> <i class="fas fa-share-alt"></i></a>
                          <a class="compare fone" title="Compare" data-compare="{{item.uuid}}"><i class="fas fa-exchange-alt ic"></i></a>
                        {% if user.is_authenticated %}
                        <div class="popup">
                          <a class="add" title="Save this product" data-product="{{item.uuid}}"><i class="far fa-heart ic"></i></a>
                        <span class="popuptext added" id="added">Added to wishlist!</span>
                        <span class="popuptext removed" id="removed">Removed from wishlist</span>
                        </div>
                        {% else %}
                        <i title="Login to save" class="far fa-heart ic disabled"></i>
                        {% endif %}
                        <a class="fone" title="Call seller" href="tel:{{ item.user.seller.phone_number }}"><i class="fas fa-phone-alt ic lc fone"></i></a>

                      </div>
                      
                      </div>
                  </div>
                  </div>
                  </a>
                  
                  
              </div>
              
              {% endfor %}
              {% else %}
              <p>No featured product available</p>
              {% endif %}
        </div>
        
        <button class="to-top-btn mt-5">Back To Top <span class="to-top-icon"> <i class="fas fa-chevron-up"></i></span></button>
        <br />

        </div>
      
        
<script src="{% static 'js/all.js' %}"></script>
<script>
  $('.to-left').on('click', function () {
    $('.to-right').removeClass('actived');
    $('.to-left').addClass('actived');
  });

  $('.to-right').on('click', function () {
    $('.to-left').removeClass('actived');
    $('.to-right').addClass('actived');
  });
  
</script>

        <br />
        <br />

      </div>
        {% include "./navigations/footer.html" %}
{% endblock %} 